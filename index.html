<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Yummy Anime ‚Äî Telegram WebApp</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    /* ===== RESET ===== */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: #0b0b0f;
      color: #fff;
    }
    a { color: inherit; }

    /* ===== BIG HEADER ===== */
    .header-big {
      position: relative;
      height: 220px;
      color: #fff;
      overflow: hidden;
      border-bottom: 1px solid #1e1e2a;
    }

    .header-bg {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.7)),
        url("https://images.unsplash.com/photo-1541560052-5e137f229371?auto=format&fit=crop&w=1400&q=60")
        center/cover no-repeat;
      filter: saturate(1.1);
      transform: scale(1.02);
    }

    .header-content {
      position: relative;
      z-index: 2;
      padding: 18px 16px;
      max-width: 1100px;
      margin: 0 auto;
    }

    .top-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .logo {
      display: flex;
      gap: 12px;
      align-items: center;
      min-width: 0;
    }

    .logo-icon {
      width: 46px;
      height: 46px;
      background: #ff5a5a;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      letter-spacing: .5px;
      flex: 0 0 auto;
      position: relative;
      overflow: hidden;
    }
    .logo-icon::after{
      content:"";
      position:absolute;
      inset:-30%;
      background: radial-gradient(circle, rgba(255,255,255,.35), transparent 55%);
      transform: rotate(20deg);
    }

    .logo-text { min-width: 0; }
    .logo-text .title {
      font-size: 18px;
      font-weight: 800;
      line-height: 1.1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .logo-text .subtitle {
      font-size: 13px;
      opacity: 0.85;
      margin-top: 2px;
    }

    .auth {
      display: flex;
      gap: 8px;
      flex: 0 0 auto;
    }
    .auth button {
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #2a2a2a;
      background: rgba(15,15,22,.65);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
    }
    .auth button.primary {
      background: #32c36c;
      border-color: #32c36c;
      color: #06130a;
    }

    .menu {
      margin-top: 16px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      background: rgba(15,15,22,.45);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px;
      padding: 10px 10px;
      backdrop-filter: blur(8px);
    }
    .menu a {
      text-decoration: none;
      font-size: 13px;
      opacity: 0.92;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
      cursor: pointer;
      user-select: none;
    }
    .menu a.active {
      border-color: rgba(90,124,255,.7);
      background: rgba(90,124,255,.16);
      opacity: 1;
    }

    /* ===== SEARCH BAR (under big header) ===== */
    .search-bar {
      max-width: 1100px;
      margin: 14px auto 0;
      padding: 0 16px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
    }
    .search-input {
      width: 100%;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid #2a2a2a;
      background: #111;
      color: #fff;
      outline: none;
    }
    .filter-btn {
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid #2a2a2a;
      background: #141424;
      color: #fff;
      cursor: pointer;
      white-space: nowrap;
      font-weight: 700;
    }

    /* ===== MINI HEADER ===== */
    .header-mini {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: rgba(18,18,22,.92);
      border-bottom: 1px solid rgba(255,255,255,.08);
      display: flex;
      align-items: center;
      padding: 0 10px;
      gap: 10px;
      z-index: 1000;

      transform: translateY(-100%);
      transition: transform 0.25s ease;
      backdrop-filter: blur(10px);
    }
    .header-mini.show { transform: translateY(0); }

    .logo-mini {
      width: 36px;
      height: 36px;
      background: #ff5a5a;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 900;
      flex: 0 0 auto;
    }

    .mini-center { flex: 1; min-width: 0; }
    .mini-center input {
      width: 100%;
      padding: 9px 12px;
      border-radius: 12px;
      border: 1px solid #2a2a2a;
      background: #111;
      color: #fff;
      outline: none;
    }

    .mini-right {
      display: flex;
      gap: 6px;
      flex: 0 0 auto;
    }
    .mini-right button {
      background: #2a2a2a;
      border: 1px solid rgba(255,255,255,.06);
      color: #fff;
      width: 36px;
      height: 36px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
    }
    .mini-right button.active {
      border-color: rgba(90,124,255,.7);
      background: rgba(90,124,255,.18);
    }

    /* ===== CONTENT ===== */
    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px;
      padding-bottom: 90px;
    }

    .page-title {
      display:flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
      margin-bottom: 12px;
    }
    .page-title h2 {
      margin: 0;
      font-size: 16px;
      font-weight: 800;
    }
    .muted { opacity:.75; font-size: 12px; }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .card {
      border: 1px solid #2a2a2a;
      border-radius: 14px;
      overflow: hidden;
      background: #0f0f16;
      cursor: pointer;
    }

    .poster {
      height: 140px;
      background: linear-gradient(135deg, #2c2c44, #151523);
      display:flex;
      align-items:center;
      justify-content:center;
      opacity: .95;
      position: relative;
    }

    .badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,.5);
      border: 1px solid rgba(255,255,255,.12);
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
    }

    .card .meta { padding: 10px 10px 12px; }
    .card .meta .t {
      font-weight: 800;
      font-size: 13px;
      line-height: 1.2;
      margin-bottom: 6px;
    }
    .card .meta .d {
      font-size: 12px;
      opacity: .8;
      height: 32px;
      overflow: hidden;
    }
    .tags { margin-top: 8px; display:flex; gap:6px; flex-wrap:wrap; }
    .tag {
      font-size: 11px;
      padding: 3px 7px;
      border: 1px solid #2a2a2a;
      border-radius: 999px;
      opacity: .92;
    }

    /* ===== DETAILS / PLAYER ===== */
    .back {
      margin: 10px 0 12px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      opacity: .9;
      user-select: none;
    }

    .panel {
      border: 1px solid #2a2a2a;
      border-radius: 14px;
      padding: 14px;
      background: #0f0f16;
    }

    .btnrow { display:flex; gap:8px; flex-wrap:wrap; margin-top: 12px; }
    .btn {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #2a2a2a;
      background: #141424;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
    }
    .btn.primary { border-color: rgba(90,124,255,.7); background: rgba(90,124,255,.18); }

    /* ===== MOBILE tweaks ===== */
    @media (max-width: 380px) {
      .menu a { font-size: 12px; padding: 7px 8px; }
      .auth button { padding: 7px 8px; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <!-- MINI HEADER (appears on scroll) -->
  <header class="header-mini" id="miniHeader">
    <div class="logo-mini" title="Yummy Anime">YA</div>

    <div class="mini-center">
      <input id="miniSearch" type="text" placeholder="–ù–∞–π—Ç–∏ –∞–Ω–∏–º–µ..."/>
    </div>

    <div class="mini-right">
      <button id="btnCatalog" title="–ö–∞—Ç–∞–ª–æ–≥">üè†</button>
      <button id="btnTop" title="–¢–æ–ø">üî•</button>
      <button id="btnFav" title="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ">‚≠ê</button>
      <button id="btnProfile" title="–ü—Ä–æ—Ñ–∏–ª—å">üë§</button>
    </div>
  </header>

  <!-- BIG HEADER -->
  <header class="header-big" id="bigHeader">
    <div class="header-bg"></div>

    <div class="header-content">
      <div class="top-row">
        <div class="logo">
          <div class="logo-icon">YA</div>
          <div class="logo-text">
            <div class="title">Yummy Anime</div>
            <div class="subtitle">YA ‚ù§Ô∏è anime</div>
          </div>
        </div>

        <div class="auth">
          <button>–í—Ö–æ–¥</button>
          <button class="primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
      </div>

      <nav class="menu" id="topMenu">
        <a data-page="catalog" class="active">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a data-page="catalog">üé¨ –ê–Ω–∏–º–µ</a>
        <a data-page="top">üî• –¢–æ–ø-100</a>
        <a data-page="random">üé≤ –°–ª—É—á–∞–π–Ω–æ–µ</a>
        <a data-page="community">üí¨ –°–æ–æ–±—â–µ—Å—Ç–≤–æ</a>
      </nav>
    </div>
  </header>

  <!-- Search / Filter row like on screenshot -->
  <div class="search-bar">
    <input id="mainSearch" class="search-input" type="text" placeholder="–ù–∞–π—Ç–∏ –∞–Ω–∏–º–µ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é"/>
    <button class="filter-btn" id="filterBtn">üîΩ –†–∞—Å–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä</button>
  </div>

  <!-- APP ROOT -->
  <div class="wrap">
    <div class="page-title">
      <h2 id="hdr">–ö–∞—Ç–∞–ª–æ–≥</h2>
      <div class="muted" id="subhdr">–°–∫—Ä–æ–ª–ª—å –≤–Ω–∏–∑ ‚Äî –ø–æ—è–≤–∏—Ç—Å—è –º–∏–Ω–∏-—à–∞–ø–∫–∞</div>
    </div>

    <div id="root"></div>
  </div>

<script>
  // ---- Telegram init ----
  const tg = window.Telegram?.WebApp;
  if (tg) {
    tg.ready();
    tg.expand();
  }

  // ‚ö†Ô∏è GitHub Pages (HTTPS) –Ω–µ —Å–º–æ–∂–µ—Ç fetch'–∏—Ç—å http://localhost:8001
  // –ü–æ—ç—Ç–æ–º—É –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–∫. API –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ –Ω–∞ HTTPS.
  const API_BASE = ""; // –Ω–∞–ø—Ä–∏–º–µ—Ä: "https://your-api.com"

  // ---- State ----
  const state = {
    page: "catalog",   // catalog | top | favorites | profile | title | player | random | community
    q: "",
    titles: [],
    favorites: new Set(),
    current: null,
    currentEpisode: 1,
  };

  const MOCK_TITLES = Array.from({length: 20}).map((_, i) => ({
    id: i + 1,
    title: `–¢–∞–π—Ç–ª #${i+1}`,
    poster: "",
    description: "–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. –ü–æ—Ç–æ–º –ø–æ–¥—Å—Ç–∞–≤–∏—à—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API.",
    episodes_count: (i % 12) + 1,
    rating: (9.0 + ((i*7)%30)/100).toFixed(2),
    tags: ["anime", (i%2? "action":"comedy"), (i%3? "2024":"2023")]
  }));

  // ---- Helpers ----
  function setHeader(text, sub="") {
    document.getElementById("hdr").textContent = text;
    document.getElementById("subhdr").textContent = sub;
  }

  function filteredTitles(list) {
    const q = state.q.trim().toLowerCase();
    if (!q) return list;
    return list.filter(t => t.title.toLowerCase().includes(q));
  }

  async function loadTitles() {
    if (API_BASE) {
      try {
        const r = await fetch(`${API_BASE}/titles`);
        if (!r.ok) throw new Error("Bad status");
        state.titles = await r.json();
        return;
      } catch (e) {
        console.log("API unavailable, fallback to mock", e);
      }
    }
    state.titles = MOCK_TITLES;
  }

  function setActiveMini(btnId) {
    ["btnCatalog","btnTop","btnFav","btnProfile"].forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      el.classList.toggle("active", id === btnId);
    });
  }

  function setActiveTopMenu(page) {
    const menu = document.getElementById("topMenu");
    menu.querySelectorAll("a").forEach(a => {
      const p = a.getAttribute("data-page") || "catalog";
      a.classList.toggle("active", p === page);
    });
  }

  // ---- UI blocks ----
  function TitleCard(t) {
    const el = document.createElement("div");
    el.className = "card";
    el.onclick = () => { state.page = "title"; state.current = t; render(); };

    const poster = document.createElement("div");
    poster.className = "poster";
    poster.innerHTML = `<span class="badge">‚≠ê ${t.rating || "9.0"}</span>POSTER`;

    const meta = document.createElement("div");
    meta.className = "meta";

    const tt = document.createElement("div");
    tt.className = "t";
    tt.textContent = t.title;

    const dd = document.createElement("div");
    dd.className = "d";
    dd.textContent = t.description;

    const tags = document.createElement("div");
    tags.className = "tags";
    (t.tags || []).slice(0,4).forEach(x => {
      const s = document.createElement("span");
      s.className = "tag";
      s.textContent = x;
      tags.appendChild(s);
    });

    meta.appendChild(tt);
    meta.appendChild(dd);
    meta.appendChild(tags);

    el.appendChild(poster);
    el.appendChild(meta);
    return el;
  }

  function renderCatalog() {
    setHeader("–ö–∞—Ç–∞–ª–æ–≥", "–û—Ç–∫—Ä–æ–π —Ç–∞–π—Ç–ª ‚Äî –±—É–¥–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∞ –∏ –ø–ª–µ–µ—Ä-–∑–∞–≥–ª—É—à–∫–∞");
    setActiveMini("btnCatalog");
    setActiveTopMenu("catalog");

    const root = document.getElementById("root");
    root.innerHTML = "";

    const list = filteredTitles(state.titles);

    const grid = document.createElement("div");
    grid.className = "grid";
    list.forEach(t => grid.appendChild(TitleCard(t)));

    root.appendChild(grid);
  }

  function renderTop() {
    setHeader("–¢–æ–ø-100", "–ü–æ–∫–∞ —ç—Ç–æ –º–æ–∫. –ü–æ—Ç–æ–º –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥");
    setActiveMini("btnTop");
    setActiveTopMenu("top");

    const root = document.getElementById("root");
    root.innerHTML = "";

    const list = [...state.titles].slice().sort((a,b) => (b.rating||0)-(a.rating||0));

    const grid = document.createElement("div");
    grid.className = "grid";
    list.forEach(t => grid.appendChild(TitleCard(t)));
    root.appendChild(grid);
  }

  function renderFavorites() {
    setHeader("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ", "–ü–æ–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø–∞–º—è—Ç–∏");
    setActiveMini("btnFav");
    setActiveTopMenu("catalog");

    const root = document.getElementById("root");
    root.innerHTML = "";

    const favs = state.titles.filter(t => state.favorites.has(t.id));
    if (!favs.length) {
      const p = document.createElement("div");
      p.className = "muted";
      p.textContent = "–ü—É—Å—Ç–æ. –û—Ç–∫—Ä–æ–π —Ç–∞–π—Ç–ª –∏ –¥–æ–±–∞–≤—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ.";
      root.appendChild(p);
      return;
    }

    const grid = document.createElement("div");
    grid.className = "grid";
    favs.forEach(t => grid.appendChild(TitleCard(t)));
    root.appendChild(grid);
  }

  function renderProfile() {
    const user = tg?.initDataUnsafe?.user;
    setHeader("–ü—Ä–æ—Ñ–∏–ª—å", user ? `@${user.username || ""} ${user.first_name || ""}` : "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω");
    setActiveMini("btnProfile");
    setActiveTopMenu("catalog");

    const root = document.getElementById("root");
    root.innerHTML = "";

    const box = document.createElement("div");
    box.className = "panel";
    box.innerHTML = `
      <div><b>Telegram:</b> ${user ? "–µ—Å—Ç—å" : "–Ω–µ—Ç"}</div>
      <div class="muted" style="margin-top:6px;">platform: ${tg?.platform || "‚Äî"}</div>
      <div class="muted">initData: ${tg?.initData ? "–µ—Å—Ç—å" : "–Ω–µ—Ç"}</div>
    `;
    root.appendChild(box);
  }

  function renderTitle() {
    const t = state.current;
    if (!t) { state.page = "catalog"; return render(); }

    setHeader(t.title, `${t.episodes_count} —Å–µ—Ä–∏–π ‚Ä¢ —Ä–µ–π—Ç–∏–Ω–≥ ${t.rating || "9.0"}`);
    setActiveTopMenu("catalog");

    const root = document.getElementById("root");
    root.innerHTML = "";

    const back = document.createElement("div");
    back.className = "back";
    back.textContent = "‚Üê –ù–∞–∑–∞–¥";
    back.onclick = () => { state.page = "catalog"; state.current = null; render(); };
    root.appendChild(back);

    const panel = document.createElement("div");
    panel.className = "panel";
    panel.innerHTML = `
      <div class="muted">${t.description}</div>
      <div class="btnrow">
        <button class="btn primary" id="favBtn"></button>
        <button class="btn" id="watchBtn">–°–º–æ—Ç—Ä–µ—Ç—å</button>
      </div>
    `;
    root.appendChild(panel);

    const favBtn = panel.querySelector("#favBtn");
    const isFav = state.favorites.has(t.id);
    favBtn.textContent = isFav ? "–£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ" : "–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ";
    favBtn.onclick = () => {
      if (state.favorites.has(t.id)) state.favorites.delete(t.id);
      else state.favorites.add(t.id);
      renderTitle();
    };

    panel.querySelector("#watchBtn").onclick = () => {
      state.page = "player";
      state.currentEpisode = 1;
      render();
    };
  }

  function renderPlayer() {
    const t = state.current;
    if (!t) { state.page = "catalog"; return render(); }

    setHeader("–ü–ª–µ–µ—Ä", t.title);

    const root = document.getElementById("root");
    root.innerHTML = "";

    const back = document.createElement("div");
    back.className = "back";
    back.textContent = "‚Üê –ö —Ç–∞–π—Ç–ª—É";
    back.onclick = () => { state.page = "title"; render(); };
    root.appendChild(back);

    const stub = document.createElement("div");
    stub.className = "panel";
    stub.innerHTML = `<b>–í–∏–¥–µ–æ –±—É–¥–µ—Ç —Ç—É—Ç</b><div class="muted" style="margin-top:6px;">–°–µ—Ä–∏—è: ${state.currentEpisode}</div>`;
    root.appendChild(stub);

    const row = document.createElement("div");
    row.className = "btnrow";

    const maxEp = t.episodes_count || 1;
    for (let i=1; i<=Math.min(maxEp, 12); i++) {
      const b = document.createElement("button");
      b.className = "btn" + (i === state.currentEpisode ? " primary" : "");
      b.textContent = `–°–µ—Ä–∏—è ${i}`;
      b.onclick = () => { state.currentEpisode = i; renderPlayer(); };
      row.appendChild(b);
    }
    root.appendChild(row);
  }

  function renderRandom() {
    setHeader("–°–ª—É—á–∞–π–Ω–æ–µ", "–ö–ª–∏–∫–∞–µ—à—å ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–∞–Ω–¥–æ–º–Ω—ã–π —Ç–∞–π—Ç–ª");
    const root = document.getElementById("root");
    root.innerHTML = "";

    const btn = document.createElement("button");
    btn.className = "btn primary";
    btn.textContent = "–í—ã–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ";
    btn.onclick = () => {
      const t = state.titles[Math.floor(Math.random() * state.titles.length)];
      state.current = t;
      state.page = "title";
      render();
    };

    root.appendChild(btn);
  }

  function renderCommunity() {
    setHeader("–°–æ–æ–±—â–µ—Å—Ç–≤–æ", "–ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞");
    const root = document.getElementById("root");
    root.innerHTML = `<div class="panel"><b>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</b><div class="muted" style="margin-top:6px;">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ–±—Å—É–∂–¥–µ–Ω–∏—è, –Ω–æ–≤–æ—Å—Ç–∏.</div></div>`;
  }

  function render() {
    if (state.page === "catalog") return renderCatalog();
    if (state.page === "top") return renderTop();
    if (state.page === "favorites") return renderFavorites();
    if (state.page === "profile") return renderProfile();
    if (state.page === "title") return renderTitle();
    if (state.page === "player") return renderPlayer();
    if (state.page === "random") return renderRandom();
    if (state.page === "community") return renderCommunity();
    renderCatalog();
  }

  // ---- Events ----
  const mainSearch = document.getElementById("mainSearch");
  const miniSearch = document.getElementById("miniSearch");

  function syncSearch(value) {
    state.q = value;
    mainSearch.value = value;
    miniSearch.value = value;
    // –µ—Å–ª–∏ –Ω–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤ –∫–∞—Ç–∞–ª–æ–≥ –Ω–∞ –ø–æ–∏—Å–∫
    if (!["catalog","top","favorites"].includes(state.page)) state.page = "catalog";
    render();
  }

  mainSearch.addEventListener("input", (e) => syncSearch(e.target.value));
  miniSearch.addEventListener("input", (e) => syncSearch(e.target.value));

  document.getElementById("btnCatalog").onclick = () => { state.page = "catalog"; render(); };
  document.getElementById("btnTop").onclick = () => { state.page = "top"; render(); };
  document.getElementById("btnFav").onclick = () => { state.page = "favorites"; render(); };
  document.getElementById("btnProfile").onclick = () => { state.page = "profile"; render(); };

  document.getElementById("filterBtn").onclick = () => {
    alert("–§–∏–ª—å—Ç—Ä –ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞ üôÇ");
  };

  // top menu clicks
  document.getElementById("topMenu").addEventListener("click", (e) => {
    const a = e.target.closest("a");
    if (!a) return;
    const page = a.getAttribute("data-page") || "catalog";
    if (page === "catalog") state.page = "catalog";
    else if (page === "top") state.page = "top";
    else if (page === "random") state.page = "random";
    else if (page === "community") state.page = "community";
    render();
  });

  // ---- Mini header show/hide on scroll ----
  const miniHeader = document.getElementById("miniHeader");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 160) miniHeader.classList.add("show");
    else miniHeader.classList.remove("show");
  });

  // ---- Init ----
  (async function init() {
    await loadTitles();
    render();
  })();
</script>

</body>
</html>
